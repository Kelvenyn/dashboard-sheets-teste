<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>√Årea de Membros ‚Äî App</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{--bg:#0b0f14;--card:#121822;--muted:#7b8aa0;--brand:#6ee7b7;--brand2:#60a5fa}
    html,body{height:100%}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:radial-gradient(1200px 800px at 10% -10%,rgba(96,165,250,.18),transparent),radial-gradient(1000px 700px at 110% 10%,rgba(110,231,183,.16),transparent),var(--bg);color:#e5eefc}
    .glass{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,.08)}
    .btn{border:1px solid rgba(255,255,255,.1);transition:all .2s ease;box-shadow:0 6px 20px rgba(0,0,0,.25)}
    .btn:hover{transform:translateY(-2px);box-shadow:0 10px 24px rgba(0,0,0,.35)}
    .ring-brand{box-shadow:0 0 0 8px rgba(96,165,250,.06),0 0 0 16px rgba(110,231,183,.05)}

    /* App Shell */
    .app-header{position:sticky;top:0;z-index:40;background:linear-gradient(180deg,rgba(11,15,20,.9),rgba(11,15,20,.75));backdrop-filter:blur(6px);border-bottom:1px solid rgba(255,255,255,.06)}
    .app-content{padding-bottom:84px}
    .tabbar{position:fixed;inset-inline:0;bottom:0;z-index:40;background:linear-gradient(180deg,rgba(18,24,34,.7),rgba(18,24,34,.92));backdrop-filter:blur(8px);border-top:1px solid rgba(255,255,255,.08)}
    .tab-btn{flex:1;display:flex;flex-direction:column;align-items:center;gap:6px;padding:10px 8px;font-size:12px;color:#b7c6dc}
    .tab-btn.active{color:#eaf2ff}
    .segmented{display:inline-flex;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);border-radius:16px;padding:4px}
    .segmented button{padding:10px 14px;border-radius:12px}
    .segmented .active{background:linear-gradient(180deg,rgba(110,231,183,.2),rgba(96,165,250,.18));border:1px solid rgba(255,255,255,.15)}

    /* Modal Flipbook */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(9,12,17,.65);backdrop-filter:blur(4px);z-index:50}
    .modal.open{display:flex}
    .flip-stage{position:relative;width:min(100%,1000px);height:min(80vh,680px);margin:auto;background:#0c121b;border-radius:18px;border:1px solid rgba(255,255,255,.08);overflow:hidden}
    .page{position:absolute;inset:0;transform-origin:left center;transition:transform .7s ease, box-shadow .7s ease;box-shadow:rgba(0,0,0,.5) 0 20px 60px}
    .page.is-turned{transform:rotateY(-180deg);box-shadow:none}
    .page canvas{width:100%;height:100%;display:block}
    .page::after{content:\"\";position:absolute;inset:0;background:linear-gradient(90deg,rgba(0,0,0,.18),rgba(0,0,0,0) 30%,rgba(0,0,0,0) 70%,rgba(0,0,0,.18));pointer-events:none}
    .flip-controls{position:absolute;inset:0;display:flex;align-items:center;justify-content:space-between;padding:0 8px}
    .flip-btn{width:46px;height:46px;border-radius:999px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);display:grid;place-items:center;transition:.15s}
    .flip-btn:hover{background:rgba(255,255,255,.16);transform:scale(1.05)}
    .flip-info{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);font-size:12px;color:#b8c7dd;background:rgba(255,255,255,.06);padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.1)}
    @media (max-width: 640px){
      .flip-stage{height:70vh}
      .page::after{background:linear-gradient(90deg,rgba(0,0,0,.25),rgba(0,0,0,0) 35%,rgba(0,0,0,0) 65%,rgba(0,0,0,.25))}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="app-header px-6 sm:px-10 py-4">
    <div class="max-w-7xl mx-auto flex items-center gap-4">
      <div class="w-10 h-10 rounded-2xl bg-gradient-to-br from-[var(--brand2)] to-[var(--brand)] grid place-items-center text-slate-900 font-extrabold">JG</div>
      <div class="flex-1">
        <h1 class="text-xl sm:text-2xl font-bold tracking-tight">√Årea de Membros</h1>
        <p class="text-[12px] text-[var(--muted)] -mt-0.5">Visual de app, r√°pido e responsivo</p>
      </div>
      <a href="https://wa.me/5579981373200" target="_blank" class="btn rounded-full px-3 py-1.5 text-xs">Suporte</a>
    </div>
  </header>

  <!-- Conte√∫do (Home/Library/Account por tabs) -->
  <main class="px-6 sm:px-10 app-content">
    <div class="max-w-7xl mx-auto grid gap-6" id="viewRoot">

      <!-- HERO (apenas na Home) -->
      <div id="heroCard" class="glass rounded-3xl p-6 sm:p-8 ring-brand">
        <div class="grid md:grid-cols-[1.2fr_.8fr] items-center gap-8">
          <div>
            <h2 class="text-2xl sm:text-3xl md:text-4xl font-extrabold leading-tight">Escolha sua trilha de conte√∫do</h2>
            <p class="mt-2 text-[15px] text-[var(--muted)]">Voc√™ pode alternar quando quiser. Seu app lembra sua escolha.</p>
            <div class="segmented mt-6 inline-flex gap-1">
              <button id="segEv" class="active">Evang√©lica</button>
              <button id="segCat">Cat√≥lica</button>
            </div>
            <div class="mt-3 text-xs text-[var(--muted)]">Dica: no celular, deslize no Flipbook para virar a p√°gina üìñ</div>
          </div>
          <div class="relative">
            <div class="absolute -inset-3 blur-3xl opacity-30 bg-gradient-to-br from-sky-500/30 to-emerald-400/30"></div>
            <div class="relative aspect-[4/3] rounded-3xl overflow-hidden border border-white/10 bg-[var(--card)] grid place-items-center">
              <svg width="200" height="200" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="opacity-80">
                <path d="M4 19h16M4 5h16" stroke="currentColor" stroke-width="1.2" opacity=".3"/>
                <path d="M6 7h6v10H6a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2Zm12 0h-6v10h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z" stroke="currentColor" stroke-width="1.3"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <!-- GRID de Conte√∫do -->
      <div class="grid gap-6" id="contentWrap">
        <!-- Evang√©lico -->
        <section id="paneEv" class="grid gap-4">
          <div class="flex items-end justify-between">
            <h3 class="text-lg sm:text-xl font-bold">Trilha Evang√©lica</h3>
            <div class="text-xs text-[var(--muted)]">PDFs liberados para sua assinatura</div>
          </div>
          <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-5">
            <article class="glass rounded-2xl p-5 flex flex-col">
              <div class="text-sm text-[var(--muted)]">Cole√ß√£o</div>
              <h4 class="text-base font-semibold mt-1">Mapas Mentais ‚Äî Antigo Testamento</h4>
              <p class="text-[13px] text-[var(--muted)] mt-1">Vers√£o evang√©lica. Visual did√°tico para crian√ßas e iniciantes.</p>
              <div class="mt-4 flex gap-2">
                <button class="btn px-4 py-2 rounded-xl text-sm bg-emerald-500/20" data-open-flipbook data-title="Mapas Mentais ‚Äî Antigo Testamento (Evang√©lica)" data-url="https://1drv.ms/b/c/8E9EE8ECCF6B7EB6/EbYI5ec8MPdBo225MOjegggB-wBjcmJY9jMVY_s7QRmJOA?e=qZpAD3">Ver em Flipbook</button>
                <a class="btn px-4 py-2 rounded-xl text-sm bg-sky-500/20" target="_blank" rel="noopener" href="https://1drv.ms/b/c/8E9EE8ECCF6B7EB6/EbYI5ec8MPdBo225MOjegggB-wBjcmJY9jMVY_s7QRmJOA?e=qZpAD3">Download</a>
              </div>
            </article>
          </div>
        </section>

        <!-- Cat√≥lico -->
        <section id="paneCat" class="grid gap-4 hidden">
          <div class="flex items-end justify-between">
            <h3 class="text-lg sm:text-xl font-bold">Trilha Cat√≥lica</h3>
            <div class="text-xs text-[var(--muted)]">PDFs liberados para sua assinatura</div>
          </div>
          <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-5">
            <article class="glass rounded-2xl p-5 flex flex-col">
              <div class="text-sm text-[var(--muted)]">Cole√ß√£o</div>
              <h4 class="text-base font-semibold mt-1">Mapas Mentais ‚Äî Novo Testamento</h4>
              <p class="text-[13px] text-[var(--muted)] mt-1">Vers√£o cat√≥lica. Linguagem simples e fiel √† teologia cat√≥lica.</p>
              <div class="mt-4 flex gap-2">
                <button class="btn px-4 py-2 rounded-xl text-sm bg-emerald-500/20" data-open-flipbook data-title="Mapas Mentais ‚Äî Novo Testamento (Cat√≥lica)" data-url="https://1drv.ms/b/c/8E9EE8ECCF6B7EB6/EbYI5ec8MPdBo225MOjegggB-wBjcmJY9jMVY_s7QRmJOA?e=qZpAD3">Ver em Flipbook</button>
                <a class="btn px-4 py-2 rounded-xl text-sm bg-sky-500/20" target="_blank" rel="noopener" href="https://1drv.ms/b/c/8E9EE8ECCF6B7EB6/EbYI5ec8MPdBo225MOjegggB-wBjcmJY9jMVY_s7QRmJOA?e=qZpAD3">Download</a>
              </div>
            </article>
          </div>
        </section>
      </div>

      <!-- FAQ -->
      <div class="glass rounded-2xl p-6">
        <details class="group">
          <summary class="cursor-pointer font-semibold">Como funciona o Flipbook?</summary>
          <div class="mt-2 text-[13px] text-[var(--muted)] leading-relaxed">
            O visual tipo ‚Äúlivro‚Äù √© gerado no seu navegador usando <strong>PDF.js</strong>. Se o flipbook n√£o carregar, o sistema volta automaticamente para o visualizador simples (iframe) do PDF.
          </div>
        </details>
      </div>

      <!-- Conta / Perfil (view tipo app) -->
      <section id="accountView" class="hidden">
        <div class="glass rounded-2xl p-6 grid sm:grid-cols-2 gap-6">
          <div>
            <h3 class="text-lg sm:text-xl font-bold">Sua Conta</h3>
            <p class="text-[13px] text-[var(--muted)] mt-1">Gerencie sua assinatura e acesso aos PDFs.</p>
            <div class="mt-4 flex items-center gap-3">
              <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-[var(--brand2)] to-[var(--brand)] grid place-items-center text-slate-900 font-extrabold">JG</div>
              <div class="text-sm">
                <div class="font-semibold">Membro</div>
                <div class="text-[var(--muted)]">Acesso ativo</div>
              </div>
            </div>
            <div class="mt-6 grid gap-2 text-sm">
              <a href="https://wa.me/5579981373200" target="_blank" class="btn rounded-xl px-4 py-2 bg-emerald-500/20">Falar no WhatsApp</a>
              <button class="btn rounded-xl px-4 py-2">Sair da conta</button>
            </div>
          </div>
          <div class="text-[13px] text-[var(--muted)] leading-relaxed">
            <h4 class="text-base font-semibold text-white mb-2">Dicas</h4>
            <ul class="list-disc pl-5 grid gap-1">
              <li>Toque em ‚ÄúBiblioteca‚Äù para ver todos os PDFs da sua trilha.</li>
              <li>Use o Flipbook e deslize para os lados para mudar de p√°gina.</li>
              <li>Adicione √† tela inicial para parecer um app (Compartilhar ‚Üí Adicionar √† Tela Inicial).</li>
            </ul>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Bottom Tabbar -->
  <nav id="tabbar" class="tabbar">
    <div class="max-w-7xl mx-auto flex">
      <button class="tab-btn active" data-tab="home" aria-label="In√≠cio">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 11.5 12 4l9 7.5V20a2 2 0 0 1-2 2h-4v-6H9v6H5a2 2 0 0 1-2-2v-8.5Z" stroke="currentColor" stroke-width="1.5"/></svg>
        In√≠cio
      </button>
      <button class="tab-btn" data-tab="library" aria-label="Biblioteca">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 19h5V5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2Zm6 0h5V5h-5v14Zm6 0h4a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4v14Z" stroke="currentColor" stroke-width="1.5"/></svg>
        Biblioteca
      </button>
      <button class="tab-btn" data-tab="account" aria-label="Conta">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-5 0-9 2.5-9 5v1h18v-1c0-2.5-4-5-9-5Z" stroke="currentColor" stroke-width="1.5"/></svg>
        Conta
      </button>
    </div>
  </nav>

  <!-- Modal Flipbook -->
  <div id="flipModal" class="modal">
    <div class="max-w-[1100px] w-[96%]">
      <div class="glass rounded-2xl p-3 sm:p-4 mb-3 flex items-center justify-between">
        <div class="flex items-center gap-2">
          <div class="w-2.5 h-2.5 rounded-full bg-emerald-400"></div>
          <div id="flipTitle" class="text-sm sm:text-base font-semibold">Visualizando</div>
        </div>
        <div class="flex items-center gap-2">
          <a id="downloadCurrent" class="btn text-xs sm:text-sm px-3 py-1.5 rounded-xl bg-sky-500/20" target="_blank" rel="noopener">Baixar PDF</a>
          <button id="closeFlip" class="btn text-xs sm:text-sm px-3 py-1.5 rounded-xl">Fechar</button>
        </div>
      </div>
      <div class="flip-stage" id="flipStage">
        <div class="flip-controls">
          <button id="btnPrev" class="flip-btn" aria-label="P√°gina anterior" title="P√°gina anterior">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 6l-6 6 6 6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </button>
          <button id="btnNext" class="flip-btn" aria-label="Pr√≥xima p√°gina" title="Pr√≥xima p√°gina">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </button>
          <div id="flipInfo" class="flip-info">Carregando‚Ä¶</div>
        </div>
      </div>
      <div id="fallback" class="hidden mt-3">
        <iframe id="pdfIframe" class="w-full h-[70vh] rounded-2xl border border-white/10" allowfullscreen loading="lazy"></iframe>
      </div>
    </div>
  </div>

  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js" integrity="sha512-k1pXcPZqR6o8r5he3qE1aS1m7tW7S56o3gQz9pWl2J8r0sH4qC7r0XvW2+R9yCqV7s3o0t4bY1WlT1s9E0Q0sA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    // ===== Tabs =====
    const tabButtons = document.querySelectorAll('.tab-btn')
    const hero = document.getElementById('heroCard')
    const accountView = document.getElementById('accountView')
    const contentWrap = document.getElementById('contentWrap')

    function setTab(tab){
      tabButtons.forEach(b=>b.classList.toggle('active', b.dataset.tab===tab))
      if(tab==='home'){
        hero.classList.remove('hidden');
        contentWrap.classList.remove('hidden');
        accountView.classList.add('hidden');
      } else if(tab==='library'){
        hero.classList.add('hidden');
        contentWrap.classList.remove('hidden');
        accountView.classList.add('hidden');
      } else if(tab==='account'){
        hero.classList.add('hidden');
        contentWrap.classList.add('hidden');
        accountView.classList.remove('hidden');
      }
      localStorage.setItem('app_tab', tab)
    }
    tabButtons.forEach(btn=>btn.addEventListener('click',()=> setTab(btn.dataset.tab)))
    setTab(localStorage.getItem('app_tab')||'home')

    // ===== Trail segmented =====
    const paneEv = document.getElementById('paneEv')
    const paneCat = document.getElementById('paneCat')
    const segEv = document.getElementById('segEv')
    const segCat = document.getElementById('segCat')

    function setTrail(t){
      if(t==='ev'){ paneEv.classList.remove('hidden'); paneCat.classList.add('hidden'); segEv.classList.add('active'); segCat.classList.remove('active') }
      else { paneCat.classList.remove('hidden'); paneEv.classList.add('hidden'); segCat.classList.add('active'); segEv.classList.remove('active') }
      localStorage.setItem('app_trail', t)
    }
    segEv.addEventListener('click',()=> setTrail('ev'))
    segCat.addEventListener('click',()=> setTrail('cat'))
    setTrail(localStorage.getItem('app_trail')||'ev')

    // ===== Flipbook + fallback =====
    const modal = document.getElementById('flipModal')
    const flipStage = document.getElementById('flipStage')
    const flipInfo = document.getElementById('flipInfo')
    const flipTitle = document.getElementById('flipTitle')
    const btnPrev = document.getElementById('btnPrev')
    const btnNext = document.getElementById('btnNext')
    const closeFlip = document.getElementById('closeFlip')
    const fallbackBox = document.getElementById('fallback')
    const iframe = document.getElementById('pdfIframe')
    const downloadCurrent = document.getElementById('downloadCurrent')

    let pdfDoc = null, current = 1, total = 0, pages = [], activeUrl = null

    document.querySelectorAll('[data-open-flipbook]').forEach(el=>{
      el.addEventListener('click',()=>{
        openFlipbook(el.getAttribute('data-url'), el.getAttribute('data-title'))
      })
    })

    closeFlip.addEventListener('click', ()=>{ modal.classList.remove('open'); cleanupFlip(); })
    modal.addEventListener('click', (e)=>{ if(e.target === modal){ modal.classList.remove('open'); cleanupFlip(); }})

    async function openFlipbook(url, title){
      flipTitle.textContent = title || 'Visualizando PDF'
      downloadCurrent.setAttribute('href', url || '#')
      modal.classList.add('open')
      flipInfo.textContent = 'Carregando‚Ä¶'
      cleanupFlip()

      if(!url || !/^https:\\/\\//.test(url)){
        showFallback(url); return
      }
      try {
        const pdfjsLib = window['pdfjsLib']
        if(!pdfjsLib || !pdfjsLib.getDocument){ showFallback(url); return }
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js'
        const loadingTask = pdfjsLib.getDocument({url, withCredentials:false})
        pdfDoc = await loadingTask.promise
        total = pdfDoc.numPages; current = 1; activeUrl = url
        flipInfo.textContent = `P√°gina ${current} / ${total}`

        pages = []; flipStage.innerHTML = ''
        for(let i=1;i<=total;i++){
          const pageHolder = document.createElement('div')
          pageHolder.className = 'page'
          pageHolder.style.zIndex = String(1000 - i)
          flipStage.appendChild(pageHolder)
          pages.push(pageHolder)
          renderPageTo(pageHolder, i)
        }
        updateTurns()
      } catch(err){ console.warn('PDF.js falhou, fallback', err); showFallback(url) }
    }

    function showFallback(url){
      fallbackBox.classList.remove('hidden')
      flipStage.classList.add('hidden')
      iframe.src = (url||'about:blank') + '#toolbar=1&navpanes=0'
      flipInfo.textContent = 'Visualizador simples carregado.'
    }

    function cleanupFlip(){
      pdfDoc = null; current = 1; total = 0; pages = []; activeUrl = null
      flipStage.innerHTML = ''
      flipStage.classList.remove('hidden')
      fallbackBox.classList.add('hidden')
      iframe.removeAttribute('src')
    }

    async function renderPageTo(holder, pageNumber){
      try{
        const page = await pdfDoc.getPage(pageNumber)
        const viewport = page.getViewport({scale:1.4})
        const stageW = flipStage.clientWidth, stageH = flipStage.clientHeight
        const scale = Math.min(stageW/viewport.width, stageH/viewport.height)
        const vp = page.getViewport({scale:scale})
        const canvas = document.createElement('canvas')
        const context = canvas.getContext('2d')
        canvas.width = vp.width; canvas.height = vp.height
        holder.appendChild(canvas)
        await page.render({canvasContext:context, viewport:vp}).promise
      }catch(e){ console.warn('Falha renderizando p√°gina', pageNumber, e) }
    }

    function updateTurns(){
      pages.forEach((el, idx)=>{
        const pageNo = idx + 1
        if(pageNo < current){ el.classList.add('is-turned') } else { el.classList.remove('is-turned') }
      })
      flipInfo.textContent = `P√°gina ${current} / ${total}`
      btnPrev.disabled = current <= 1
      btnNext.disabled = current >= total
      btnPrev.style.opacity = btnPrev.disabled ? .4 : 1
      btnNext.style.opacity = btnNext.disabled ? .4 : 1
    }
    btnPrev.addEventListener('click', ()=>{ if(current>1){ current--; updateTurns() }})
    btnNext.addEventListener('click', ()=>{ if(current<total){ current++; updateTurns() }})

    // Gestos de deslize no flip
    let startX = null
    flipStage.addEventListener('touchstart', (e)=>{ startX = e.changedTouches[0].clientX })
    flipStage.addEventListener('touchend', (e)=>{
      if(startX===null) return
      const dx = e.changedTouches[0].clientX - startX
      if(Math.abs(dx) > 40){
        if(dx < 0 && current < total){ current++; updateTurns() }
        if(dx > 0 && current > 1){ current--; updateTurns() }
      }
      startX = null
    })
  </script>
</body>
</html>
